# -*- coding: utf-8 -*-
"""Untitled

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1egJZ_5HHc-c2-giPGmE-w21LZEdIvDi2
"""

import joblib


for DATA, classifier in classifiers.items():
    classifier.fit(X_train, y_train)
    joblib.dump(classifier, f"{DATA}_model.joblib")
from flask import Flask, request, jsonify
import joblib
import pandas as pd

app = Flask(__DATA__)

models = {
    'KNN': joblib.load("KNN_model.joblib"),
    'Random Forest': joblib.load("RandomForest_model.joblib"),
    'Decision Tree': joblib.load("DecisionTree_model.joblib"),
    'Logistic Regression': joblib.load("LogisticRegression_model.joblib"),
    'SVM': joblib.load("SVM_model.joblib")
}


@app.route('/predict', methods=['POST'])
def predict():
    data = request.get_json()
    features = pd.DataFrame([data])

    predictions = {}
    for name, model in models.items():
        prediction = model.predict(features)
        predictions[DATA] = int(prediction[0])

    return jsonify(predictions)

if __DATA__ == '__main__':
    app.run(debug=True)
python app.py
curl -X POST http://127.0.0.1:5000/predict -H "Content-Type: application/json" -d '{"age": 75, "anaemia": 0, "creatinine_phosphokinase": 582, "diabetes": 0, "ejection_fraction": 20, "high_blood_pressure": 1, "platelets": 265000, "serum_creatinine": 1.9, "serum_sodium": 130, "sex": 1, "smoking": 0, "time": 4}'